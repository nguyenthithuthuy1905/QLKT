@* Form Nhập MSSV và tự động điền thông tin *@
<form id="formCamDoan">
    <div class="form-group">
        <label for="masv">Mã số sinh viên</label>
        <input type="text" id="masv" class="form-control" placeholder="Nhập MSSV" />
    </div>
    <div class="form-group">
        <label for="hoten">Họ và tên</label>
        <input type="text" id="hoten" class="form-control" disabled />
    </div>
    <div class="form-group">
        <label for="lop">Lớp</label>
        <input type="text" id="lop" class="form-control" disabled />
    </div>
    <div class="form-group">
        <label for="ngaythi">Ngày thi</label>
        <input type="text" id="ngaythi" class="form-control" disabled />
    </div>
    <div class="form-group">
        <label for="giothi">Giờ thi</label>
        <input type="text" id="giothi" class="form-control" disabled />
    </div>
    <div class="form-group">
        <label for="phongthi">Phòng thi</label>
        <input type="text" id="phongthi" class="form-control" disabled />
    </div>
    <div class="form-group">
        <label for="monhoc">Môn học</label>
        <input type="text" id="monhoc" class="form-control" disabled />
    </div>

    <button type="submit" class="btn btn-primary">Lưu thông tin</button>
</form>

<script>
    document.getElementById("masv").addEventListener("change", function () {
        const masv = this.value.trim();
        if (masv === "") return;

        // Gửi yêu cầu AJAX để lấy thông tin từ API
        fetch(`/CamDoan/GetStudentInfo?maSV=${masv}`)
            .then(response => response.json())
            .then(data => {
                console.log("Dữ liệu nhận được:", data); // Debug kiểm tra dữ liệu API

                if (data) {
                    // Điền dữ liệu vào các ô input
                    document.getElementById("hoten").value = data.HoTen || "Không có tên";
                    document.getElementById("lop").value = data.MaLop || "Không có lớp";
                    document.getElementById("ngaythi").value = data.NgayThi !== "Không có lịch thi" ? new Date(data.NgayThi).toLocaleDateString("vi-VN") : "Không có lịch thi";
                    document.getElementById("giothi").value = data.GioThi || "Không có giờ thi";
                    document.getElementById("phongthi").value = data.PhongThi || "Không có phòng thi";
                    document.getElementById("monhoc").value = data.TenMonHoc || "Không có môn học";
                } else {
                    alert("Không tìm thấy thông tin sinh viên!");
                    // Clear fields if no data found
                    document.getElementById("hoten").value = "";
                    document.getElementById("lop").value = "";
                    document.getElementById("ngaythi").value = "";
                    document.getElementById("giothi").value = "";
                    document.getElementById("phongthi").value = "";
                    document.getElementById("monhoc").value = "";
                }
            })
            .catch(error => {
                console.error("Lỗi:", error);
                alert("Không tìm thấy lịch thi!");
            });
    });
</script>
